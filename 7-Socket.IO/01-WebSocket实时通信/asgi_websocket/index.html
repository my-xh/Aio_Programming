<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSocket实例</title>
</head>
<body>
<div>
    <button>Ping</button>
</div>
<div id="output"></div>
<script>
    (function () {
        let output = document.querySelector('#output');
        // 创建WebSocket实例，用于连接服务器
        let ws = new WebSocket(`ws://${location.host}`);
        // 当收到服务器消息时触发该事件
        ws.onmessage = e => {
            output.innerHTML += `[${Date.now()}] Received data: ${e.data}<br>`;
        };
        // 为按钮添加点击事件
        document.querySelector('button').onclick = e => {
            ws.send('Ping');
        };
    })();
</script>
</body>
</html>